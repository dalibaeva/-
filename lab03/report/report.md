---
# Front matter
lang: ru-RU
title: "Лабораторная работа № 3"
subtitle: "Дискреционное разграничение прав в Linux. Два пользователя."
author: "Алибаева Данагуль НБибд-01-18"

# Formatting
toc-title: "Содержание"
toc: true # Table of contents
toc_depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4paper
documentclass: scrreprt
polyglossia-lang: russian
polyglossia-otherlangs: english
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase
indent: true
pdf-engine: lualatex
header-includes:
  - \linepenalty=10 # the penalty added to the badness of each line within a paragraph (no associated penalty node) Increasing the value makes tex try to have fewer lines in the paragraph.
  - \interlinepenalty=0 # value of the penalty (node) added after each line of a paragraph.
  - \hyphenpenalty=50 # the penalty for line breaking at an automatically inserted hyphen
  - \exhyphenpenalty=50 # the penalty for line breaking at an explicit hyphen
  - \binoppenalty=700 # the penalty for breaking a line at a binary operator
  - \relpenalty=500 # the penalty for breaking a line at a relation
  - \clubpenalty=150 # extra penalty for breaking after first line of a paragraph
  - \widowpenalty=150 # extra penalty for breaking before last line of a paragraph
  - \displaywidowpenalty=50 # extra penalty for breaking before last line before a display math
  - \brokenpenalty=100 # extra penalty for page breaking after a hyphenated line
  - \predisplaypenalty=10000 # penalty for breaking before a display
  - \postdisplaypenalty=0 # penalty for breaking after a display
  - \floatingpenalty = 20000 # penalty for splitting an insertion (can only be split footnote in standard LaTeX)
  - \raggedbottom # or \flushbottom
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Получение практических навыков работы в консоли с атрибутами файлов для групп пользователей.

# Задание

1. В установленной операционной системе создать учётную запись пользователя guest (используя учётную запись администратора)

2. Задать пароль для пользователя guest (используя учётную запись администратора)

3. Аналогично создать второго пользователя guest2

4. Добавить пользователя guest2 в группу guest

5. Осуществить вход в систему от двух пользователей на двух разных консолях

6. Для обоих пользователей определить директорию, в которой находимся. Сравните её с приглашениями командной строки.

7. Уточнить имя пользователя, его группу, кто входит в неё и к каким группам принадлежит он сам. Определить в какие группы входят пользователи guest и guest2. Сравнить вывод команды groups с выводом команд id -Gn и id -G.

8. Сравнить полученную информацию с содержимым файла /etc/group

9. От имени пользователя guest2 выполнить регистрацию пользователя guest2 в группе guest

10. От имени пользователя guest изменить права директории /home/guest, разрешив все действия для пользователей группы

11. От имени пользователя guest снять с директории /home/guest/dir1 все атрибуты и проверить правильность снятия атрибутов. Меняя атрибуты у директории dir1 и файла file1 от имени пользователя guest и делая проверку от пользователя guest2, заполнить табл. 3.1, определив опытным путём, какие операции разрешены, а какие нет. Если операция разрешена, занесите в таблицу знак «+», если не разрешена, знак «-».

Сравнить табл. 2.1 (из лабораторной работы № 2) и табл. 3.1. На основании заполненной таблицы определите те или иные минимально необходимые права для выполнения пользователем guest2 операций внутри директории dir1 и заполните табл. 3.2.

# Теоретическое введение

Атрибуты файла - это набор из девяти основных битов. Определяющих какие из пользователей обладают правами на чтение, запись, а также запуск файлов для выполнения. Данный набор формирует код, называемый режимом доступа к файлу/каталогу. Первые три бита определяют права доступа для владельца. Следующие — для группы пользователей, к которой относится файл и последние три бита — права доступа для всех остальных пользователей в системе. [1]

Существует также ещё четыре дополнительных бита. Которые определяют тип самого файла и задаются непосредственно при создании файла. С помощью команды chmod можно менять основные (и некоторые дополнительные) биты режима доступа. Сделать это может только владелец файла или суперпользователь. Просматривать атрибуты (в том числе и режимы доступа) позволяет команда ls. Таким образом, характер поведения ФС, а также распределение доступа и управление им полностью определяется атрибутами файлов. Которые хранит сама ФС — это самодостаточный и универсальный подход. [1]

Для записи кода режима доступа используется восьмеричная запись чисел. Как уже было отмечено, код доступа содержит три «триады» битов — для пользователя, группы и всех остальных, именно в таком порядке. Битам из первой триады соответствуют значения в восьмеричной записи 400, 200 и 100. Для второй триады (т. е. для группы) — 40, 20 и 10. Наконец, для третьей (все остальные) — 4, 2 и 1. В свою очередь, первому биту в каждой триаде соответствует доступ на чтение (r — «read»). Второму — на запись (w — «write») и третьему — на выполнение, т. е. x — «execute». [1]

Установка бита чтения (r) в одной из триад (или во всех) задаёт право открывать данный файл для чтения соответствующим категориям пользователей. Наличие бита записи (w) позволяет изменять файл. При этом возможно его удаление и/или переименование файла, но только в том случае, если заданы соответствующие биты для его родительского каталога, поскольку именно в его записях хранятся имена файлов. [1]

# Выполнение лабораторной работы

1.Лабораторная работа выполнялась дома со следующими характеристиками техники: 

– Intel(R) Core(TM) i5-8300H CPU @ 2.30GHz, 2304 МГц, ядер: 4, логических процессоров: 8

– ОС Майкрософт Windows 10 Pro

– VirtualBox верс. 6.1.26

2. В установленной при выполнении предыдущей лабораторной работы операционной системе запустила терминал и перешла под учетную запись root с помощью команды su (рис. -@fig:001)

![Переход под учетную запись root](image/1.png){ #fig:001 width=70% }

3. Создала учётную запись пользователя guest2 (используя учётную запись администратора): с помощью команды useradd guest2 (рис. -@fig:002)

![Создание учетной записи пользователя guest2](image/1_2.png){ #fig:002 width=70% }

4. Задала пароль для пользователя guest2 (используя учётную запись администратора): passwd guest2 (рис. -@fig:003)

![Задание пароля для пользователя guest2](image/1_3.png){ #fig:003 width=70% }

5. Добавила пользователя guest2 в группу guest: gpasswd -a guest2 guest (рис. -@fig:004)

![Добавление пользователя guest2 в группу guest](image/1_4.png){ #fig:004 width=70% }

6. Осуществила вход в систему от двух пользователей на двух разных консолях: guest на первой консоли и guest2 на второй консоли. (рис. -@fig:005)

![Вход в систему от двух пользователей на двух разных консолях](image/1_5.png){ #fig:005 width=70% }

7. Для обоих пользователей командой pwd определила директорию, в которой я нахожусь. В обоих случаях я нахожусь в домашней директории пользователя dalibaeva. (рис. -@fig:006)

![Определение директории](image/1_6.png){ #fig:006 width=70% }

8. Уточнила имя пользователя, группу, кто входит в неё и к каким группам принадлежит он сам. Определила командами groups guest и groups guest2, в какие группы входят пользователи guest и guest2. В группу guest входят пользователи guest и guest2, а в группу guest2 – пользователь guest2. Сравнила вывод команды groups с выводом команд id -Gn и id -G. Команда id –Gn показывает в каких группах состоит пользователь, а команда id –G – id этих групп (рис. -@fig:007)

![Уточнение групп пользователей](image/1_7.png){ #fig:007 width=70% }

9. Сравнила полученную информацию с содержимым файла /etc/group. Просмотрела файл командой cat /etc/group (рис. -@fig:008)

![Просмотр файла /etc/passwd](image/1_8.png){ #fig:008 width=70% }

10. От имени пользователя guest2 выполнила регистрацию пользователя guest2 в группе guest командой newgrp guest (рис. -@fig:009). 

![Регистрация пользователя guest2 в группе guest](image/1_9.png){ #fig:009 width=70% }

11. От имени пользователя guest изменила права директории /home/guest, разрешив все действия для пользователей группы: chmod g+rwx /home/guest (рис. -@fig:010).     

![Изменение прав директории](image/1_10.png){ #fig:010 width=70% }

12. От имени пользователя guest сняла с директории /home/guest/dir1 все атрибуты командой chmod 000 dirl (рис. -@fig:011).

![Изменение атрибутов](image/1_11.png){ #fig:011 width=70% }


13. Заполнила таблицу «Установленные права и разрешённые действия для групп» (см. табл. [-@tbl:001]), меняя атрибуты у директории dir1 и файла file1 от имени пользователя guest и делая проверку от пользователя guest2, определив опытным путём, какие операции разрешены, а какие нет. Если операция разрешена, заносила в таблицу знак «+», если не разрешена, знак «-». 

14. На основании заполненной таблицы определила те или иные минимально необходимые права для выполнения пользователем guest2 операций внутри директории dir1 и заполните табл. 3.2. (см. табл. [-@tbl:002]).

: Установленные права и разрешённые действия для групп {#tbl:001}

| Права директории | Права файла | Создание файла | Удаление файла | Запись в файл | Чтение файла | Смена директории | Просмотр файлов в директории | Переименование файла | Смена атрибутов файла |
|------------------|-------------|----------------|----------------|---------------|--------------|------------------|------------------------------|----------------------|-----------------------|
| d--- (000)        | --- (000)   | -              | -              | -             | -            | -                | -                            | -                    | -                     |
| d--- (000)        | --x (010)   | -              | -              | -             | -            | -                | -                            | -                    | -                     |
| d--- (000)        | -w- (020)   | -              | -              | -             | -            | -                | -                            | -                    | -                     |
| d--- (000)        | -wx (030)   | -              | -              | -             | -            | -                | -                            | -                    | -                     |
| d--- (000)        | r-- (040)   | -              | -              | -             | -            | -                | -                            | -                    | -                     |
| d--- (000)        | r-x (050)   | -              | -              | -             | -            | -                | -                            | -                    | -                     |
| d--- (000)        | rw- (060)   | -              | -              | -             | -            | -                | -                            | -                    | -                     |
| d--- (000)        | rwx (070)   | -              | -              | -             | -            | -                | -                            | -                    | -                     |
| d--x (010)        | --- (000)   | -              | -              | -             | -            | +                | -                            | -                    | +                     |
| d--x (010)        | --x (010)   | -              | -              | -             | -            | +                | -                            | -                    | +                     |
| d--x (010)        | -w- (020)   | -              | -              | +             | -            | +                | -                            | -                    | +                     |
| d--x (010)        | -wx (030)   | -              | -              | +             | -            | +                | -                            | -                    | +                     |
| d--x (010)        | r-- (040)   | -              | -              | -             | +            | +                | -                            | -                    | +                     |
| d--x (010)        | r-x (050)   | -              | -              | -             | +            | +                | -                            | -                    | +                     |
| d--x (010)        | rw- (060)   | -              | -              | +             | +            | +                | -                            | -                    | +                     |
| d--x (010)        | rwx (070)   | -              | -              | +             | +            | +                | -                            | -                    | +                     |
| d-w- (020)        | --- (000)   | -              | -              | -             | -            | -                | -                            | -                    | -                     |
| d-w- (020)        | --x (010)   | -              | -              | -             | -            | -                | -                            | -                    | -                     |
| d-w- (020)        | -w- (020)   | -              | -              | -             | -            | -                | -                            | -                    | -                     |
| d-w- (020)        | -wx (030)   | -              | -              | -             | -            | -                | -                            | -                    | -                     |
| d-w- (020)        | r-- (040)   | -              | -              | -             | -            | -                | -                            | -                    | -                     |
| d-w- (020)        | r-x (050)   | -              | -              | -             | -            | -                | -                            | -                    | -                     |
| d-w- (020)        | rw- (060)   | -              | -              | -             | -            | -                | -                            | -                    | -                     |
| d-w- (020)        | rwx (070)   | -              | -              | -             | -            | -                | -                            | -                    | -                     |
| d-wx (030)        | --- (000)   | +              | +              | -             | -            | +                | -                            | +                    | +                     |
| d-wx (030)        | --x (010)   | +              | +              | -             | -            | +                | -                            | +                    | +                     |
| d-wx (030)        | -w- (020)   | +              | +              | +             | -            | +                | -                            | +                    | +                     |
| d-wx (030)        | -wx (030)   | +              | +              | +             | -            | +                | -                            | +                    | +                     |
| d-wx (030)        | r-- (040)   | +              | +              | -             | +            | +                | -                            | +                    | +                     |
| d-wx (030)        | r-x (050)   | +              | +              | -             | +            | +                | -                            | +                    | +                     |
| d-wx (030)        | rw- (060)   | +              | +              | +             | +            | +                | -                            | +                    | +                     |
| d-wx (030)        | rwx (070)   | +              | +              | +             | +            | +                | -                            | +                    | +                     |
| dr-- (040)        | --- (000)   | -              | -              | -             | -            | -                | +                            | -                    | -                     |
| dr-- (040)        | --x (010)   | -              | -              | -             | -            | -                | +                            | -                    | -                     |
| dr-- (040)        | -w- (020)   | -              | -              | -             | -            | -                | +                            | -                    | -                     |
| dr-- (040)        | -wx (030)   | -              | -              | -             | -            | -                | +                            | -                    | -                     |
| dr-- (040)        | r-- (040)   | -              | -              | -             | -            | -                | +                            | -                    | -                     |
| dr-- (040)        | r-x (050)   | -              | -              | -             | -            | -                | +                            | -                    | -                     |
| dr-- (040)        | rw- (060)   | -              | -              | -             | -            | -                | +                            | -                    | -                     |
| dr-- (040)        | rwx (070)   | -              | -              | -             | -            | -                | +                            | -                    | -                     |
| dr-x (050)        | --- (000)   | -              | -              | -             | -            | +                | +                            | -                    | +                     |
| dr-x (050)        | --x (010)   | -              | -              | -             | -            | +                | +                            | -                    | +                     |
| dr-x (050)        | -w- (020)   | -              | -              | +             | -            | +                | +                            | -                    | +                     |
| dr-x (050)        | -wx (030)   | -              | -              | +             | -            | +                | +                            | -                    | +                     |
| dr-x (050)        | r-- (040)   | -              | -              | -             | +            | +                | +                            | -                    | +                     |
| dr-x (050)        | r-x (050)   | -              | -              | -             | +            | +                | +                            | -                    | +                     |
| dr-x (050)        | rw- (060)   | -              | -              | +             | +            | +                | +                            | -                    | +                     |
| dr-x (050)        | rwx (070)   | -              | -              | +             | +            | +                | +                            | -                    | +                     |
| drw- (060)        | --- (000)   | -              | -              | -             | -            | -                | +                            | -                    | -                     |
| drw- (060)        | --x (010)   | -              | -              | -             | -            | -                | +                            | -                    | -                     |
| drw- (060)        | -w- (020)   | -              | -              | -             | -            | -                | +                            | -                    | -                     |
| drw- (060)        | -wx (030)   | -              | -              | -             | -            | -                | +                            | -                    | -                     |
| drw- (060)        | r-- (040)   | -              | -              | -             | -            | -                | +                            | -                    | -                     |
| drw- (060)        | r-x (050)   | -              | -              | -             | -            | -                | +                            | -                    | -                     |
| drw- (060)        | rw- (060)   | -              | -              | -             | -            | -                | +                            | -                    | -                     |
| drw- (060)        | rwx (070)   | -              | -              | -             | -            | -                | +                            | -                    | -                     |
| drwx (070)        | --- (000)   | +              | +              | -             | -            | +                | +                            | +                    | +                     |
| drwx (070)        | --x (010)   | +              | +              | -             | -            | +                | +                            | +                    | +                     |
| drwx (070)        | -w- (020)   | +              | +              | +             | -            | +                | +                            | +                    | +                     |
| drwx (070)        | -wx (030)   | +              | +              | +             | -            | +                | +                            | +                    | +                     |
| drwx (070)        | r-- (040)   | +              | +              | -             | +            | +                | +                            | +                    | +                     |
| drwx (070)        | r-x (050)   | +              | +              | -             | +            | +                | +                            | +                    | +                     |
| drwx (070)        | rw- (060)   | +              | +              | +             | +            | +                | +                            | +                    | +                     |
| drwx (070)        | rwx (070)   | +              | +              | +             | +            | +                | +                            | +                    | + 



: Минимальные права для совершения операций от имени пользователя входящих в группу {#tbl:002}

| Операция               | Минимальные права на директорию | Минимальные права на файл |
|------------------------|---------------------------------|---------------------------|
| Создание файла         | 	(030)                      | 		(000)          |
| Удаление файла         | 	(030)                      |	        (000)          |
| Чтение файла           | 	(010)                      | 		(040)          |
| Запись в файл          | 	(010)                      |	        (020)          |
| Переименование файла   | 	(030)                      | 		(000)          |
| Создание поддиректории | 	(030)                      | 		(000)          |
| Удаление поддиректории | 	(030)                      | 		(000)          |




# Выводы

Получила практические навыки работы в консоли с атрибутами файлов для групп пользователей.

# Список литературы 

1. Атрибуты файлов в Linux // URL: https://itproffi.ru/atributy-fajlov-v-linux/ (дата обращения: 01.10.2021).